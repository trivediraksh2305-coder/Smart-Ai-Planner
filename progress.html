<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Analytics | Smart AI Study Planner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #7c3aed;
            --primary-dark: #5b21b6;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --sidebar-bg: #111827;
            --text: #f8fafc;
            --text-light: #cbd5e1;
            --border: #334155;
            --success: #10b981;
            --purple-light: #a78bfa;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--sidebar-bg);
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 0 25px 25px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-right: 10px;
        }
        
        .logo-text {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }
        
        .logo-subtitle {
            font-size: 12px;
            color: var(--text-light);
            margin-left: 50px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            margin-bottom: 20px;
        }
        
        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--info));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
            margin-right: 12px;
        }
        
        .user-details h4 {
            font-size: 16px;
            margin-bottom: 3px;
        }
        
        .user-details p {
            font-size: 13px;
            color: var(--text-light);
        }
        
        .nav-menu {
            list-style: none;
            padding: 0;
            margin-bottom: 30px;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 25px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .nav-link i {
            width: 20px;
            margin-right: 12px;
            font-size: 18px;
        }
        
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text);
        }
        
        .nav-link.active {
            background-color: rgba(124, 58, 237, 0.1);
            color: var(--primary);
            border-left-color: var(--primary);
        }
        
        .sidebar-footer {
            margin-top: auto;
            padding: 20px 25px 0;
            border-top: 1px solid var(--border);
        }
        
        .logout-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 12px;
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .logout-btn i {
            margin-right: 8px;
        }
        
        .logout-btn:hover {
            background-color: rgba(239, 68, 68, 0.2);
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 30px;
            min-height: 100vh;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .header-left h1 {
            font-size: 28px;
            font-weight: 700;
        }
        
        .header-left p {
            color: var(--text-light);
            margin-top: 5px;
        }
        
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text);
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Progress Container */
        .progress-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Progress Header */
        .progress-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .progress-title h2 {
            font-size: 26px;
            margin-bottom: 10px;
        }
        
        .progress-title p {
            color: rgba(255, 255, 255, 0.9);
            max-width: 600px;
        }
        
        .progress-icon {
            font-size: 60px;
            color: white;
            opacity: 0.8;
        }
        
        /* Progress Stats */
        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            display: flex;
            align-items: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 24px;
        }
        
        .stat-icon.completion {
            background-color: rgba(16, 185, 129, 0.2);
            color: var(--secondary);
        }
        
        .stat-icon.hours {
            background-color: rgba(124, 58, 237, 0.2);
            color: var(--primary);
        }
        
        .stat-icon.consistency {
            background-color: rgba(59, 130, 246, 0.2);
            color: var(--info);
        }
        
        .stat-icon.efficiency {
            background-color: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }
        
        .stat-info h3 {
            font-size: 32px;
            margin-bottom: 5px;
        }
        
        .stat-info p {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .stat-change {
            font-size: 14px;
            margin-top: 5px;
        }
        
        .stat-change.positive {
            color: var(--secondary);
        }
        
        .stat-change.negative {
            color: var(--danger);
        }
        
        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1100px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Chart Card */
        .chart-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .chart-actions {
            display: flex;
            gap: 10px;
        }
        
        .chart-action-btn {
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }
        
        .chart-action-btn:hover {
            background-color: rgba(124, 58, 237, 0.1);
            border-color: var(--primary);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        /* Subject Progress */
        .subject-progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .subject-progress-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
        }
        
        .subject-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .subject-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 600;
            margin-right: 15px;
        }
        
        .subject-icon.math {
            background: linear-gradient(135deg, var(--info), #60a5fa);
        }
        
        .subject-icon.science {
            background: linear-gradient(135deg, var(--secondary), #34d399);
        }
        
        .subject-icon.english {
            background: linear-gradient(135deg, var(--primary), var(--purple-light));
        }
        
        .subject-icon.history {
            background: linear-gradient(135deg, var(--warning), #fbbf24);
        }
        
        .subject-details h4 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .subject-details p {
            font-size: 13px;
            color: var(--text-light);
        }
        
        .progress-row {
            margin-bottom: 15px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .progress-label span:first-child {
            font-size: 14px;
            color: var(--text-light);
        }
        
        .progress-label span:last-child {
            font-size: 14px;
            font-weight: 600;
        }
        
        .progress-bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .progress-fill.math {
            background: linear-gradient(90deg, var(--info), #60a5fa);
        }
        
        .progress-fill.science {
            background: linear-gradient(90deg, var(--secondary), #34d399);
        }
        
        .progress-fill.english {
            background: linear-gradient(90deg, var(--primary), var(--purple-light));
        }
        
        .progress-fill.history {
            background: linear-gradient(90deg, var(--warning), #fbbf24);
        }
        
        /* Study Insights */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .insight-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
        }
        
        .insight-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }
        
        .insight-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: white;
        }
        
        .insight-icon.positive {
            background: linear-gradient(135deg, var(--secondary), #34d399);
        }
        
        .insight-icon.warning {
            background: linear-gradient(135deg, var(--warning), #fbbf24);
        }
        
        .insight-icon.info {
            background: linear-gradient(135deg, var(--info), #60a5fa);
        }
        
        .insight-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .insight-content {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .insight-action {
            margin-top: 15px;
        }
        
        /* Time Distribution */
        .time-distribution {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .distribution-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .distribution-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .distribution-period {
            display: flex;
            gap: 10px;
        }
        
        .period-btn {
            padding: 8px 16px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .period-btn.active {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .period-btn:hover:not(.active) {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .distribution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .distribution-item {
            text-align: center;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
        
        .distribution-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .distribution-label {
            font-size: 14px;
            color: var(--text-light);
        }
        
        /* Progress Actions */
        .progress-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn-secondary {
            background-color: #2d3748;
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background-color: #374151;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #0da271;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }
        
        .empty-state i {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--text);
        }
        
        /* Responsive Design */
        @media (max-width: 900px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .progress-header {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .progress-icon {
                order: -1;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .subject-progress-grid {
                grid-template-columns: 1fr;
            }
            
            .insights-grid {
                grid-template-columns: 1fr;
            }
            
            .distribution-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 600px) {
            .progress-stats {
                grid-template-columns: 1fr;
            }
            
            .distribution-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .chart-container {
                height: 250px;
            }
        }
        
        /* Chart Colors */
        .chart-colors {
            --color-math: #3b82f6;
            --color-science: #10b981;
            --color-english: #7c3aed;
            --color-history: #f59e0b;
            --color-chemistry: #8b5cf6;
            --color-biology: #34d399;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <div class="logo-text">StudyAI</div>
            </div>
            <div class="logo-subtitle">Smart AI Study Planner</div>
        </div>
        
        <div class="user-info">
            <div class="user-avatar" id="userAvatar">JS</div>
            <div class="user-details">
                <h4 id="userName">John Student</h4>
                <p id="userClass">Grade 12</p>
            </div>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="planner.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Study Planner</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="timetable.html" class="nav-link">
                    <i class="fas fa-table"></i>
                    <span>Daily Timetable</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="subjects.html" class="nav-link">
                    <i class="fas fa-book"></i>
                    <span>My Subjects</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="progress.html" class="nav-link active">
                    <i class="fas fa-chart-line"></i>
                    <span>Progress</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="profile.html" class="nav-link">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </a>
            </li>
        </ul>
        
        <div class="sidebar-footer">
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>Progress Analytics</h1>
                <p>Track your study performance, insights, and progress over time</p>
            </div>
            
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <!-- Progress Container -->
        <div class="progress-container">
            <!-- Progress Header -->
            <div class="progress-header">
                <div class="progress-title">
                    <h2>Study Performance Dashboard</h2>
                    <p>AI-powered insights and analytics to track your learning progress and optimize study efficiency</p>
                </div>
                <div class="progress-icon">
                    <i class="fas fa-chart-network"></i>
                </div>
            </div>
            
            <!-- Progress Stats -->
            <div class="progress-stats">
                <div class="stat-card">
                    <div class="stat-icon completion">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="completionRate">78%</h3>
                        <p>Completion Rate</p>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 12% from last week
                        </div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon hours">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalHours">42.5</h3>
                        <p>Total Study Hours</p>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 8.5hrs from last week
                        </div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon consistency">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="consistencyScore">86%</h3>
                        <p>Consistency Score</p>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i> 5% from last week
                        </div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon efficiency">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="efficiencyScore">92%</h3>
                        <p>Efficiency Score</p>
                        <div class="stat-change negative">
                            <i class="fas fa-arrow-down"></i> 3% from last week
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Charts Grid -->
            <div class="charts-grid">
                <!-- Progress Over Time Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Study Progress Over Time</h3>
                        <div class="chart-actions">
                            <button class="chart-action-btn" data-chart="progress" data-period="week">Week</button>
                            <button class="chart-action-btn active" data-chart="progress" data-period="month">Month</button>
                            <button class="chart-action-btn" data-chart="progress" data-period="all">All Time</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>
                
                <!-- Subject Distribution Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Study Time by Subject</h3>
                        <div class="chart-actions">
                            <button class="chart-action-btn active" data-chart="subject" data-type="hours">By Hours</button>
                            <button class="chart-action-btn" data-chart="subject" data-type="sessions">By Sessions</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="subjectChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Subject Progress -->
            <div class="subject-progress-grid" id="subjectProgress">
                <!-- Subject progress cards will be loaded here -->
            </div>
            
            <!-- Study Insights -->
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-header">
                        <div class="insight-icon positive">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h3 class="insight-title">Top Performing Subject</h3>
                    </div>
                    <div class="insight-content">
                        <p id="topSubject">Mathematics is your strongest subject with 85% completion rate. You're consistently performing above average in this area.</p>
                    </div>
                    <div class="insight-action">
                        <button class="btn-secondary" style="padding: 8px 16px; font-size: 14px;">
                            <i class="fas fa-chart-line"></i> View Detailed Report
                        </button>
                    </div>
                </div>
                
                <div class="insight-card">
                    <div class="insight-header">
                        <div class="insight-icon warning">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3 class="insight-title">Needs Improvement</h3>
                    </div>
                    <div class="insight-content">
                        <p id="weakSubject">Physics shows the lowest progress at 45%. Consider allocating more study time and focusing on difficult topics.</p>
                    </div>
                    <div class="insight-action">
                        <button class="btn-secondary" style="padding: 8px 16px; font-size: 14px;">
                            <i class="fas fa-book"></i> Study Recommendations
                        </button>
                    </div>
                </div>
                
                <div class="insight-card">
                    <div class="insight-header">
                        <div class="insight-icon info">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h3 class="insight-title">AI Study Tip</h3>
                    </div>
                    <div class="insight-content">
                        <p id="aiTip">Based on your study patterns, you're most productive between 2-5 PM. Try scheduling difficult subjects during this time window.</p>
                    </div>
                    <div class="insight-action">
                        <button class="btn-secondary" style="padding: 8px 16px; font-size: 14px;">
                            <i class="fas fa-robot"></i> Optimize Schedule
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Time Distribution -->
            <div class="time-distribution">
                <div class="distribution-header">
                    <h3 class="distribution-title">Weekly Time Distribution</h3>
                    <div class="distribution-period">
                        <button class="period-btn active" data-period="current">Current Week</button>
                        <button class="period-btn" data-period="previous">Previous Week</button>
                        <button class="period-btn" data-period="average">Weekly Average</button>
                    </div>
                </div>
                
                <div class="distribution-grid" id="timeDistribution">
                    <!-- Time distribution will be loaded here -->
                </div>
            </div>
            
            <!-- Progress Actions -->
            <div class="progress-actions">
                <button class="btn-secondary" id="exportReport">
                    <i class="fas fa-download"></i>
                    Export Progress Report
                </button>
                <button class="btn" id="generateInsights">
                    <i class="fas fa-robot"></i>
                    Generate AI Insights
                </button>
                <button class="btn-success" id="setGoals">
                    <i class="fas fa-bullseye"></i>
                    Set New Goals
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            checkLoginStatus();
            
            // DOM Elements
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menuToggle');
            const logoutBtn = document.getElementById('logoutBtn');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userClass = document.getElementById('userClass');
            
            // Stats Elements
            const completionRate = document.getElementById('completionRate');
            const totalHours = document.getElementById('totalHours');
            const consistencyScore = document.getElementById('consistencyScore');
            const efficiencyScore = document.getElementById('efficiencyScore');
            
            // Chart Elements
            const progressChartCtx = document.getElementById('progressChart').getContext('2d');
            const subjectChartCtx = document.getElementById('subjectChart').getContext('2d');
            
            // Progress Elements
            const subjectProgress = document.getElementById('subjectProgress');
            const timeDistribution = document.getElementById('timeDistribution');
            
            // Insight Elements
            const topSubject = document.getElementById('topSubject');
            const weakSubject = document.getElementById('weakSubject');
            const aiTip = document.getElementById('aiTip');
            
            // Action Buttons
            const exportReport = document.getElementById('exportReport');
            const generateInsights = document.getElementById('generateInsights');
            const setGoals = document.getElementById('setGoals');
            
            // Chart Instances
            let progressChart = null;
            let subjectChart = null;
            
            // Progress Data
            let progressData = {};
            let subjects = [];
            let studySessions = [];
            
            // Load user data
            loadUserData();
            
            // Load progress data
            loadProgressData();
            
            // Toggle sidebar on mobile
            menuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });
            
            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 900 && 
                    !sidebar.contains(event.target) && 
                    !menuToggle.contains(event.target) && 
                    sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            });
            
            // Logout functionality
            logoutBtn.addEventListener('click', function() {
                // Clear session
                localStorage.removeItem('studyAISession');
                
                // Redirect to login page
                window.location.href = 'login.html';
            });
            
            // Chart period buttons
            document.querySelectorAll('.chart-action-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const chartType = this.getAttribute('data-chart');
                    const period = this.getAttribute('data-period');
                    const type = this.getAttribute('data-type');
                    
                    // Update active button
                    document.querySelectorAll(`[data-chart="${chartType}"]`).forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Update chart
                    if (chartType === 'progress') {
                        updateProgressChart(period);
                    } else if (chartType === 'subject') {
                        updateSubjectChart(type);
                    }
                });
            });
            
            // Time distribution period buttons
            document.querySelectorAll('.period-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const period = this.getAttribute('data-period');
                    
                    // Update active button
                    document.querySelectorAll('.period-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Update time distribution
                    updateTimeDistribution(period);
                });
            });
            
            // Action buttons
            exportReport.addEventListener('click', function() {
                // In a real app, this would generate and download a report
                alert('Progress report would be exported as a PDF file. This feature is simulated.');
                
                // Simulate download
                const originalText = exportReport.innerHTML;
                exportReport.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Exporting...';
                
                setTimeout(() => {
                    exportReport.innerHTML = originalText;
                    alert('Progress report exported successfully!');
                }, 1500);
            });
            
            generateInsights.addEventListener('click', function() {
                // Generate new AI insights
                generateAIInsights();
                
                // Show loading state
                const originalText = generateInsights.innerHTML;
                generateInsights.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
                
                setTimeout(() => {
                    generateInsights.innerHTML = originalText;
                    alert('New AI insights generated based on your latest study data!');
                }, 1000);
            });
            
            setGoals.addEventListener('click', function() {
                // Open goals setting (simulated)
                alert('Goal setting feature would open a form to set new study goals.');
            });
            
            // Load user data
            function loadUserData() {
                // Get user data from localStorage
                const userData = localStorage.getItem('studyAIUser');
                const sessionData = localStorage.getItem('studyAISession');
                
                if (userData) {
                    const user = JSON.parse(userData);
                    
                    // Set user name
                    userName.textContent = user.name;
                    
                    // Set user class
                    const classMap = {
                        '9': 'Grade 9',
                        '10': 'Grade 10',
                        '11': 'Grade 11',
                        '12': 'Grade 12',
                        'college': 'College',
                        'university': 'University',
                        'other': 'Other'
                    };
                    userClass.textContent = classMap[user.class] || `Grade ${user.class}`;
                    
                    // Set avatar initials
                    const nameParts = user.name.split(' ');
                    const initials = nameParts.length > 1 
                        ? (nameParts[0][0] + nameParts[1][0]).toUpperCase()
                        : nameParts[0].substring(0, 2).toUpperCase();
                    userAvatar.textContent = initials;
                }
            }
            
            // Load progress data
            function loadProgressData() {
                // Load subjects
                const savedSubjects = localStorage.getItem('studyAISubjects');
                subjects = savedSubjects ? JSON.parse(savedSubjects) : [];
                
                // Load study sessions from plan
                const savedPlan = localStorage.getItem('studyAIPlan');
                if (savedPlan) {
                    const plan = JSON.parse(savedPlan);
                    if (plan.dailyPlans) {
                        studySessions = processStudySessions(plan.dailyPlans);
                    }
                }
                
                // Load progress data from localStorage or initialize
                const savedProgress = localStorage.getItem('studyAIProgress');
                if (savedProgress) {
                    progressData = JSON.parse(savedProgress);
                } else {
                    progressData = initializeProgressData();
                }
                
                // Update UI with loaded data
                updateProgressStats();
                updateSubjectProgress();
                updateTimeDistribution('current');
                generateAIInsights();
                
                // Initialize charts
                initializeCharts();
            }
            
            // Process study sessions from plan
            function processStudySessions(dailyPlans) {
                const sessions = [];
                
                dailyPlans.forEach(dayPlan => {
                    dayPlan.sessions.forEach(session => {
                        if (session.subject !== 'Break') {
                            sessions.push({
                                subject: session.subject,
                                duration: session.duration,
                                date: new Date(dayPlan.date),
                                topic: session.topic
                            });
                        }
                    });
                });
                
                return sessions;
            }
            
            // Initialize progress data
            function initializeProgressData() {
                // Generate sample progress data
                const today = new Date();
                const data = {
                    stats: {
                        completionRate: 78,
                        totalHours: 42.5,
                        consistencyScore: 86,
                        efficiencyScore: 92
                    },
                    weeklyProgress: generateWeeklyProgress(),
                    subjectDistribution: generateSubjectDistribution(),
                    timeDistribution: generateTimeDistribution(),
                    insights: generateInitialInsights()
                };
                
                // Save to localStorage
                localStorage.setItem('studyAIProgress', JSON.stringify(data));
                
                return data;
            }
            
            // Generate weekly progress data
            function generateWeeklyProgress() {
                const progress = [];
                const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                
                days.forEach(day => {
                    progress.push({
                        day: day,
                        hours: Math.random() * 3 + 2, // 2-5 hours
                        completion: Math.floor(Math.random() * 30) + 70, // 70-100%
                        efficiency: Math.floor(Math.random() * 20) + 80 // 80-100%
                    });
                });
                
                return progress;
            }
            
            // Generate subject distribution
            function generateSubjectDistribution() {
                const subjectsList = ['Mathematics', 'Physics', 'Chemistry', 'Biology', 'English', 'History'];
                const distribution = [];
                
                subjectsList.forEach(subject => {
                    distribution.push({
                        subject: subject,
                        hours: Math.random() * 10 + 5, // 5-15 hours
                        sessions: Math.floor(Math.random() * 15) + 10, // 10-25 sessions
                        progress: Math.floor(Math.random() * 50) + 30 // 30-80%
                    });
                });
                
                return distribution;
            }
            
            // Generate time distribution
            function generateTimeDistribution() {
                return {
                    current: [4.5, 5.2, 3.8, 6.1, 4.9, 2.5, 1.8],
                    previous: [3.8, 4.5, 3.2, 5.8, 4.2, 3.1, 2.2],
                    average: [4.2, 4.8, 3.5, 5.9, 4.5, 2.8, 2.0]
                };
            }
            
            // Generate initial insights
            function generateInitialInsights() {
                return {
                    topSubject: 'Mathematics is your strongest subject with 85% completion rate. You\'re consistently performing above average in this area.',
                    weakSubject: 'Physics shows the lowest progress at 45%. Consider allocating more study time and focusing on difficult topics.',
                    aiTip: 'Based on your study patterns, you\'re most productive between 2-5 PM. Try scheduling difficult subjects during this time window.'
                };
            }
            
            // Update progress stats
            function updateProgressStats() {
                completionRate.textContent = `${progressData.stats.completionRate}%`;
                totalHours.textContent = progressData.stats.totalHours;
                consistencyScore.textContent = `${progressData.stats.consistencyScore}%`;
                efficiencyScore.textContent = `${progressData.stats.efficiencyScore}%`;
            }
            
            // Initialize charts
            function initializeCharts() {
                // Initialize progress chart
                updateProgressChart('month');
                
                // Initialize subject chart
                updateSubjectChart('hours');
            }
            
            // Update progress chart
            function updateProgressChart(period) {
                let labels = [];
                let data = [];
                
                if (period === 'week') {
                    // Weekly data
                    progressData.weeklyProgress.forEach(item => {
                        labels.push(item.day);
                        data.push(item.hours);
                    });
                } else if (period === 'month') {
                    // Monthly data (last 4 weeks)
                    labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
                    data = [12.5, 14.2, 10.8, 15.5];
                } else {
                    // All time (last 6 months)
                    labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
                    data = [45, 52, 48, 60, 55, 68];
                }
                
                // Destroy existing chart if it exists
                if (progressChart) {
                    progressChart.destroy();
                }
                
                // Create new chart
                progressChart = new Chart(progressChartCtx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Study Hours',
                            data: data,
                            borderColor: 'rgb(124, 58, 237)',
                            backgroundColor: 'rgba(124, 58, 237, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    color: 'rgb(203, 213, 225)',
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(30, 41, 59, 0.9)',
                                titleColor: 'rgb(248, 250, 252)',
                                bodyColor: 'rgb(203, 213, 225)',
                                borderColor: 'rgb(124, 58, 237)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgb(203, 213, 225)'
                                }
                            },
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgb(203, 213, 225)',
                                    callback: function(value) {
                                        return value + ' hrs';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Update subject chart
            function updateSubjectChart(type) {
                const subjectData = progressData.subjectDistribution;
                const labels = subjectData.map(item => item.subject);
                let data = [];
                let label = '';
                
                if (type === 'hours') {
                    data = subjectData.map(item => item.hours);
                    label = 'Study Hours';
                } else {
                    data = subjectData.map(item => item.sessions);
                    label = 'Study Sessions';
                }
                
                // Colors for subjects
                const backgroundColors = [
                    'rgba(59, 130, 246, 0.7)',    // Math - blue
                    'rgba(16, 185, 129, 0.7)',    // Physics - green
                    'rgba(124, 58, 237, 0.7)',    // Chemistry - purple
                    'rgba(34, 211, 153, 0.7)',    // Biology - teal
                    'rgba(239, 68, 68, 0.7)',     // English - red
                    'rgba(245, 158, 11, 0.7)'     // History - amber
                ];
                
                const borderColors = [
                    'rgb(59, 130, 246)',
                    'rgb(16, 185, 129)',
                    'rgb(124, 58, 237)',
                    'rgb(34, 211, 153)',
                    'rgb(239, 68, 68)',
                    'rgb(245, 158, 11)'
                ];
                
                // Destroy existing chart if it exists
                if (subjectChart) {
                    subjectChart.destroy();
                }
                
                // Create new chart
                subjectChart = new Chart(subjectChartCtx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: label,
                            data: data,
                            backgroundColor: backgroundColors,
                            borderColor: borderColors,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    color: 'rgb(203, 213, 225)',
                                    font: {
                                        size: 12
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(30, 41, 59, 0.9)',
                                titleColor: 'rgb(248, 250, 252)',
                                bodyColor: 'rgb(203, 213, 225)',
                                borderColor: 'rgb(124, 58, 237)',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgb(203, 213, 225)'
                                }
                            },
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgb(203, 213, 225)',
                                    callback: function(value) {
                                        return type === 'hours' ? value + ' hrs' : value + ' sessions';
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Update subject progress cards
            function updateSubjectProgress() {
                subjectProgress.innerHTML = '';
                
                if (subjects.length === 0) {
                    // Load from subject distribution if no subjects
                    progressData.subjectDistribution.forEach(subject => {
                        const progressCard = createSubjectProgressCard(subject);
                        subjectProgress.appendChild(progressCard);
                    });
                } else {
                    // Use actual subjects
                    subjects.forEach(subject => {
                        const subjectWithProgress = {
                            subject: subject.name,
                            progress: subject.progress || Math.floor(Math.random() * 50) + 30,
                            hours: subject.studyHours || Math.floor(Math.random() * 10) + 5,
                            sessions: Math.floor(Math.random() * 15) + 10
                        };
                        
                        const progressCard = createSubjectProgressCard(subjectWithProgress);
                        subjectProgress.appendChild(progressCard);
                    });
                }
            }
            
            // Create subject progress card
            function createSubjectProgressCard(subject) {
                const card = document.createElement('div');
                card.className = 'subject-progress-card';
                
                // Get subject icon class
                const iconClass = getSubjectIconClass(subject.subject);
                
                card.innerHTML = `
                    <div class="subject-header">
                        <div class="subject-icon ${iconClass}">
                            ${subject.subject.charAt(0)}
                        </div>
                        <div class="subject-details">
                            <h4>${subject.subject}</h4>
                            <p>${subject.hours} study hours this week</p>
                        </div>
                    </div>
                    <div class="progress-row">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span>${subject.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill ${iconClass}" style="width: ${subject.progress}%"></div>
                        </div>
                    </div>
                    <div class="progress-row">
                        <div class="progress-label">
                            <span>Study Sessions</span>
                            <span>${subject.sessions}</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill ${iconClass}" style="width: ${Math.min(subject.sessions * 4, 100)}%"></div>
                        </div>
                    </div>
                `;
                
                return card;
            }
            
            // Get subject icon class
            function getSubjectIconClass(subjectName) {
                const subject = subjectName.toLowerCase();
                
                if (subject.includes('math')) return 'math';
                if (subject.includes('physics')) return 'science';
                if (subject.includes('chemistry')) return 'english'; // Using english class for chemistry
                if (subject.includes('biology')) return 'science';
                if (subject.includes('english') || subject.includes('literature')) return 'english';
                if (subject.includes('history') || subject.includes('social')) return 'history';
                
                return 'math'; // Default
            }
            
            // Update time distribution
            function updateTimeDistribution(period) {
                timeDistribution.innerHTML = '';
                
                const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                const data = progressData.timeDistribution[period];
                
                days.forEach((day, index) => {
                    const distributionItem = document.createElement('div');
                    distributionItem.className = 'distribution-item';
                    
                    distributionItem.innerHTML = `
                        <div class="distribution-value">${data[index].toFixed(1)}</div>
                        <div class="distribution-label">${day}</div>
                    `;
                    
                    timeDistribution.appendChild(distributionItem);
                });
            }
            
            // Generate AI insights
            function generateAIInsights() {
                if (subjects.length > 0) {
                    // Find top and weak subjects from actual data
                    const sortedSubjects = [...subjects].sort((a, b) => (b.progress || 0) - (a.progress || 0));
                    
                    if (sortedSubjects.length > 0) {
                        const top = sortedSubjects[0];
                        const weak = sortedSubjects[sortedSubjects.length - 1];
                        
                        topSubject.textContent = `${top.name} is your strongest subject with ${top.progress || 0}% completion rate. You're consistently performing above average in this area.`;
                        weakSubject.textContent = `${weak.name} shows the lowest progress at ${weak.progress || 0}%. Consider allocating more study time and focusing on difficult topics.`;
                    }
                }
                
                // Generate random AI tip
                const tips = [
                    'Based on your study patterns, you\'re most productive between 2-5 PM. Try scheduling difficult subjects during this time window.',
                    'Your consistency has improved by 12% this week. Maintaining this pattern will significantly boost your exam performance.',
                    'You tend to study more efficiently on weekdays. Consider allocating lighter revision sessions on weekends.',
                    'Based on data analysis, shorter but more frequent study sessions (45-60 mins) yield better retention for you.',
                    'Your study efficiency drops after 8 PM. Consider wrapping up by 9 PM for optimal learning.'
                ];
                
                aiTip.textContent = tips[Math.floor(Math.random() * tips.length)];
            }
            
            // Check login status
            function checkLoginStatus() {
                const sessionData = localStorage.getItem('studyAISession');
                
                if (!sessionData) {
                    // Not logged in, redirect to login
                    window.location.href = 'login.html';
                    return;
                }
                
                const session = JSON.parse(sessionData);
                
                // Check if session is still valid
                const loginTime = new Date(session.loginTime);
                const now = new Date();
                const hoursSinceLogin = (now - loginTime) / (1000 * 60 * 60);
                
                // If session is older than 24 hours, require re-login
                if (hoursSinceLogin > 24) {
                    localStorage.removeItem('studyAISession');
                    window.location.href = 'login.html';
                }
            }
        });
    </script>
</body>
</html>